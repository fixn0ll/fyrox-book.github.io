# Базовый узел (Base Node)

Базовый узел — это узел сцены, который хранит иерархическую информацию (дескриптор родительского узла и набор дескрипторов дочерних узлов), локальную и глобальную трансформацию, имя, тег, время жизни и т.д. Его название говорит само за себя — он используется как базовый узел для всех других узлов сцены (через композицию).

Он не содержит графической информации, поэтому всегда невидим, но полезен как "контейнер" для дочерних узлов.

## Как создать

Используйте `PivotBuilder` для создания экземпляра узла Pivot (помните, что сам узел `Base` используется только для построения других типов узлов):

```rust,no_run
{{#include ../code/snippets/src/scene/base.rs:build_node}}
```

## Построение сложной иерархии

Для построения сложной иерархии узлов используйте метод `.with_children()` у `BaseBuilder`, он позволяет вам построить иерархию любой сложности:

```rust,no_run
{{#include ../code/snippets/src/scene/base.rs:build_complex_node}}
```

Обратите внимание, что при создании экземпляра `Camera` мы передаём новый экземпляр `BaseBuilder` в него, этот экземпляр также может использоваться для установки некоторых свойств и набора дочерних узлов.

"Цепочный синтаксис" не является обязательным для использования, приведённый выше фрагмент кода можно переписать следующим образом:

```rust,no_run
{{#include ../code/snippets/src/scene/base.rs:build_complex_node_flat}}
```

Однако он выглядит менее информативно, так как теряет иерархический вид, и сложнее понять отношения между объектами.

## Трансформация

Базовый узел имеет локальную трансформацию, которая позволяет вам перемещать/масштабировать/вращать и т.д. ваш узел, как вы хотите. Например, чтобы переместить узел в определённое место, вы можете использовать это:

```rust,no_run
{{#include ../code/snippets/src/scene/base.rs:translate_node}}
```

Вы также можете объединить несколько вызовов `set_x`, например:

```rust,no_run
{{#include ../code/snippets/src/scene/base.rs:transform_node}}
```

Подробнее о трансформациях см. [здесь](./transform.md).

## Видимость

Узел `Base` хранит всю информацию о локальной видимости и глобальной видимости (с учётом видимости цепочки родительских узлов). Изменение видимости узла может быть полезно, если вы хотите улучшить производительность, скрывая удалённые объекты (однако настоятельно рекомендуется использовать уровни детализации для этого) или скрыть некоторые объекты в вашей сцене. Есть три основных метода для установки или получения видимости:

- `set_visibility` — устанавливает локальную видимость для узла.
- `visibility` — возвращает текущую локальную видимость узла.
- `global_visibility` — возвращает комбинированную видимость узла. Она включает видимость каждого родительского узла в иерархии, поэтому, если у вас есть родительский узел с некоторыми дочерними узлами, и вы установите видимость родительского узла в `false`, глобальная видимость дочерних узлов также будет `false`, даже если локальная видимость равна `true`. Это полезный приём для скрытия сложных объектов с большим количеством дочерних узлов.

## Включение/отключение узлов сцены

Узел сцены может быть включён или отключён. Отключённые узлы исключаются из игрового цикла и имеют почти нулевое потребление процессора (их глобальная трансформация/видимость/состояние включения всё ещё обновляются из-за ограничений движка). Отключение узла может быть полезно, если вам нужно полностью заморозить какую-то иерархию и сохранить её в этом состоянии до тех пор, пока она снова не будет включена. Это может быть полезно для отключения частей сцены, с которыми игрок не может взаимодействовать, чтобы повысить производительность. Имейте в виду, что состояние включения иерархично, как и видимость. Когда вы отключаете родительский узел с некоторыми дочерними узлами, дочерние узлы также будут отключены.