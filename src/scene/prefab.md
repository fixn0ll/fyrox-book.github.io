# Префабы

Префаб — это отдельная сцена, которая может быть инстанцирована в другой сцене, сохраняя связи между свойствами её экземпляров и её родительского префаба. Префабы позволяют вам создавать часть сцены и иметь несколько её экземпляров в других сценах.

Давайте быстро проверим, что это означает на практике. Движок имеет систему префабов, которая позволяет вам создавать иерархические сцены, которые могут включать любое количество других сцен в качестве дочерних сцен. Дочерние сцены могут иметь свои собственные дочерние сцены и так далее. Это очень эффективный механизм разделения, который позволяет вам размещать части сцены в отдельных сценах (префабах) и изменять их независимо. Изменения в дочерних сценах будут автоматически отражены во всех родительских сценах. Вот очень простой пример, почему это важно: представьте, что вам нужно заполнить город 3D-моделями машин. Каждый тип машины имеет свою собственную 3D-модель и, например, коллизионное тело, которое не позволит игроку проходить сквозь машины. Как бы вы это сделали? Самое простое (и глупое) решение — скопировать десятки моделей машин в сцену, и всё готово. Теперь представьте, что вам нужно что-то изменить в вашей машине, например, добавить багажник, который можно открыть. Что вы будете делать? Конечно, вы должны "пройтись" по каждой модели машины и внести необходимые изменения, у вас просто нет другого варианта. Это займёт огромное количество времени и в целом очень непродуктивно.

Вот где префабы сэкономят вам часы работы. Всё, что вам нужно сделать, — это создать префаб машины и инстанцировать его несколько раз в вашей сцене. Когда вам нужно будет что-то изменить в машине, вы просто переходите к префабу и вносите изменения. После этого каждый экземпляр префаба будет иметь ваши изменения!

Префабы могут использоваться для создания самодостаточных сущностей в вашей игре, примеры этого включают: визуальные эффекты, любые скриптованные игровые сущности (боты, турели, игрок, двери и т.д.). Такие префабы могут быть либо напрямую инстанцированы в сцене в редакторе, либо инстанцированы во время выполнения, когда это необходимо.

## Как создать и использовать префаб

Всё, что вам нужно сделать, — это создать сцену в редакторе со всеми необходимыми объектами и сохранить её! После этого вы можете использовать сцену в других сценах и просто инстанцировать её, как обычные 3D-модели. Вы можете либо инстанцировать её из редактора, перетащив префаб в превью сцены, либо сделать стандартное [инстанцирование ресурса модели](../resources/model.md#instantiation).

## Наследование свойств

Как уже упоминалось во вступительном разделе, экземпляры наследуют свойства от своих родительских префабов. Например, вы можете изменить положение объекта в префабе, и каждый экземпляр отразит это изменение — экземпляры объекта также переместятся. Это работает до тех пор, пока не будет ручного изменения свойства в экземпляре, если вы это сделаете, ваше изменение будет иметь более высокий приоритет. Подробнее см. в [этой главе](./inheritance.md).

## Иерархические префабы

Префабы могут содержать другие экземпляры префабов внутри себя. Это означает, что вы можете, например, создать комнату, заполненную экземплярами других префабов (книжные полки, стулья, столы и т.д.), а затем использовать префаб комнаты для построения более крупной сцены. Изменения в базовых префабах будут отражены в их экземплярах, независимо от того, насколько глубока иерархия.