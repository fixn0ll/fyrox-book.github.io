# Обзор FyroxEd

FyroxEd — это встроенный редактор Fyrox, созданный с одной целью — быть интегрированной средой разработки игр, которая помогает вам создавать игру от начала до конца с относительно небольшими усилиями.

Вы проведёте много времени в редакторе, поэтому вам стоит познакомиться с ним и изучить его основные функции. Эта глава познакомит вас с основами, а более продвинутые темы будут рассмотрены в соответствующих главах.

## Окна

Когда вы впервые откроете редактор, вы можете быть ошеломлены количеством окон, кнопок, списков и т.д. Каждое окно служит своей цели, но все они работают вместе, чтобы помочь вам создать игру. Давайте взглянем на скриншот редактора и узнаем, за что отвечает каждая его часть (обратите внимание, что это может меняться со временем, так как разработка идёт быстро, и изображения могут устаревать):

![Окна](./overview.png)

- **World viewer** — показывает все объекты в сцене и их взаимосвязи. Позволяет просматривать и редактировать содержимое сцены в иерархическом виде.
- **Scene preview** — отображает сцену с отладочной информацией и различными объектами, специфичными для редактора (гизмо (gizmos), иконки объектов и т.д.). Позволяет выбирать, перемещать, вращать, масштабировать, удалять и т.д. различные сущности. **Toolbar** слева показывает доступные инструменты, зависящие от контекста.
- **Inspector** — позволяет изменять различные свойства выбранного объекта.
- **Message Log** — отображает важные сообщения от редактора.
- **Navmesh Panel** — позволяет создавать, удалять и редактировать навигационные сетки.
- **Command Stack** — отображает ваши последние действия и позволяет отменять или повторять их изменения.
- **Asset Browser** — позволяет просматривать ассеты вашей игры и создавать экземпляры ресурсов в сцене, среди прочего.
- **Audio Context** — позволяет редактировать настройки звукового контекста сцены (громкость, доступные аудиоканалы, эффекты и т.д.).

## Создание или загрузка сцены

FyroxEd работает со сценами — сцена является контейнером для игровых сущностей, вы можете создавать и редактировать одну сцену за раз. Чтобы начать работу с редактором, у вас должна быть загружена сцена. Чтобы создать сцену, перейдите в `File -> New Scene`.

Чтобы загрузить существующую сцену, перейдите в `File -> Load` и выберите нужную сцену через файловый браузер. Недавно открытые сцены можно загрузить быстрее, перейдя в `File -> Recent Scenes` и выбрав нужную.

## Заполнение сцены

Сцена может содержать различные игровые сущности. Есть два эквивалентных способа их создания:

- Перейдя в `Create` в главном меню и выбрав нужную сущность из выпадающего списка.
- Щёлкнув правой кнопкой мыши на игровой сущности в **World viewer** и выбрав нужную сущность из подменю `Create Child`.

Сложные объекты, обычно создаваемые в программах для 3D-моделирования (Blender, 3Ds Max, Maya и т.д.), могут быть сохранены в различных форматах. Fyrox поддерживает формат FBX, который поддерживается практически любым ПО для 3D-моделирования. Вы можете создать экземпляр таких объектов, просто перетащив нужный объект и отпустив его в **Scene preview**. Во время перетаскивания вы также увидите предпросмотр объекта.

То же самое можно сделать с другими сценами, созданными в редакторе (файлы `rgs`). Например, вы можете создать сцену с несколькими объектами и скриптами, а затем повторно использовать её в других сценах. Такие сцены называются [префабами](../scene/prefab.md).

## Сохранение сцены

Чтобы сохранить свою работу, перейдите в `File -> Save`. Если вы сохраняете новую сцену, редактор попросит вас указать имя файла и путь, куда сцена будет сохранена. Сцены, загруженные из файла, автоматически сохраняются по тому же пути, откуда они были загружены.

## Отмена и повтор действий

FyroxEd запоминает ваши действия и позволяет отменять и повторять изменения, вызванные этими действиями. Вы можете отменить или повторить изменения, перейдя в `Edit -> Undo/Redo` или с помощью стандартных сочетаний клавиш: `Ctrl+Z` — отменить, `Ctrl+Y` — повторить.

## Управление

Есть несколько клавиш управления, которые вы будете использовать чаще всего, практически все они работают в окне **Scene Preview**:

### Управление камерой редактора
Нажмите и удерживайте `[Правую кнопку мыши]` в окне **Scene Preview**, чтобы включить управление камерой:
  - `[W][S][A][D]` — Движение камеры вперёд/назад/влево/вправо
  - `[Пробел][Q]/[E]` — Поднять/опустить камеру
  - `[Ctrl]` — Ускорить движение
  - `[Shift]` — Замедлить движение
### Другие
- `[Левая кнопка мыши]` — Выбрать объект
- `[Средняя кнопка мыши]` — Панорамирование камеры в плоскости обзора
- `[1]` — Режим выбора
- `[2]` — Режим перемещения
- `[3]` — Режим масштабирования
- `[4]` — Режим вращения
- `[5]` — Режим редактирования навигационной сетки
- `[6]` — Режим редактирования ландшафта
- `[Ctrl]+[Z]` — Отменить
- `[Ctrl]+[Y]` — Повторить
- `[Delete]` — Удалить текущий выбранный объект.

## Режим игры

Одной из ключевых функций редактора является возможность запускать вашу игру из него в отдельном процессе. Используйте кнопку `Play/Stop` в верхней части окна **Scene Preview**, чтобы войти или выйти из режима игры. Учтите, что интерфейс редактора будет заблокирован, пока вы находитесь в режиме игры.

Режим игры может быть активирован только для проектов, созданных с помощью `fyrox-template` (или для проектов с аналогичной структурой). Редактор вызывает команды `cargo` для сборки и запуска вашей игры в отдельном процессе. Запуск игры в отдельном процессе гарантирует, что редактор не завершится с ошибкой, если игра завершится с ошибкой. Это также обеспечивает отличную изоляцию между игрой и редактором, не давая возможности сломать редактор при запуске игры.

## Дополнительные утилиты

В редакторе также есть несколько мощных утилит, которые сделают вашу жизнь проще. Их можно найти в разделе `Utils` главного меню:

- Curve Editor (Редактор кривых) — позволяет создавать и редактировать ресурсы кривых для создания сложных законов изменения параметров игры.
- Path Fixer (Исправление путей) — помогает исправить некорректные ссылки на ресурсы в ваших сценах.